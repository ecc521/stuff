<script>

(async function(){
  await navigator.serviceWorker.register("/stuff/manifestcreator/sw.js")
  let obj = {
    name:"bob",
    short_name:"b"
  }
  let url = "https://ecc521.github.io/stuff/manifestcreator/manifest?" + JSON.stringify(obj)
  let json = await fetch(url)
  
  console.log(json)
  console.log(url)

  json = await json.json()
  console.log(json)
  
  let req = await fetch("https://ecc521.github.io/stuff/manifestcreator/manifest?youwillignorethisasmethodispost", {
        method: "POST",
        mode: "cors",
        cache: "no-cache",
        headers: {
            "Content-Type": "application/json; charset=utf-8",
        },
        redirect: "follow",
        body: JSON.stringify(obj)
    })
  console.log(req)
  
}())

</script>
